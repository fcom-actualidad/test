(this["webpackJsonpfcom-quiz-app"]=this["webpackJsonpfcom-quiz-app"]||[]).push([[0],{26:function(e,t,r){},48:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),c=r(19),s=r.n(c),o=(r(26),r(20)),i=r(21),u=r(2),l=r.n(u),d=r(5),j=r(3),b=r(0);var m=function(e){var t=e.handleSubmit,r=(e.setWithTimer,e.loading),n=(e.loadingQuestions,e.quizInProgress),a=e.isShown,c=e.togglePassword,s=e.currentPlayer,o=e.handleLogout,i=e.handleProfile;return Object(b.jsxs)("header",{children:[s&&Object(b.jsxs)("div",{children:[Object(b.jsxs)("h1",{children:["Hola, ",s.name]}),Object(b.jsxs)("div",{className:"buttons-section",children:[Object(b.jsx)("button",{className:"btn bg-green",type:"button",onClick:i,children:"Mis Puntajes"}),Object(b.jsx)("button",{className:"btn bg-red",type:"button",onClick:o,children:"Salir"})]})]}),!s&&Object(b.jsxs)("form",{onSubmit:t,children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"email",children:"Email"}),Object(b.jsx)("input",{type:"text",id:"email",defaultValue:"email",disabled:r||n})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"password",children:"Contrase\xf1a"}),Object(b.jsx)("input",{id:"password",type:a?"text":"password",defaultValue:"contrase\xf1a",disabled:r||n}),Object(b.jsxs)("div",{className:"checkbox-container",children:[Object(b.jsx)("label",{htmlFor:"checkbox",children:"Mostrar "}),Object(b.jsx)("input",{id:"checkbox",type:"checkbox",checked:a,onChange:c})]})]}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("button",{className:"btn",type:"submit",disabled:r||n,children:r?"Loading...":n?"En juego":"Ingresar"})})]})]})};var h=function(e){var t=e.questionNum,r=e.totalQuestions,a=e.percentage,c=Object(n.useRef)();return Object(n.useEffect)((function(){c.current.style.setProperty("--progress",a)}),[a]),Object(b.jsxs)("div",{className:"progress-conatiner",children:[Object(b.jsxs)("div",{className:"progress-text",children:["Pregunta ",t," de ",r]}),Object(b.jsx)("div",{ref:c,className:"progress-bar"})]})};var p=function(e){var t=e.score,r=e.timer,n=e.withTimer;return Object(b.jsxs)("div",{className:"score-timer-container",children:[n&&Object(b.jsxs)("div",{className:"score-timer-border",children:[Object(b.jsx)("div",{className:"score-timer-text",children:"Timer"}),Object(b.jsx)("div",{className:"score-timer-number",children:r})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"score-timer-text",children:"Score"}),Object(b.jsx)("div",{className:"score-timer-number",children:t})]})]})};var O=function(e){var t=e.question,r=e.handleAnswers,a=e.setTimer,c=e.withTimer,s=e.lastQuestion,o=e.gameEnded,i=e.timer,u=Object(n.useState)(!1),l=Object(j.a)(u,2),d=l[0],m=l[1],h=Object(n.useState)(""),p=Object(j.a)(h,2),O=p[0],f=p[1],x=Object(n.useRef)();return x.current=function(){f(t.answer),m(!0),r(null)},Object(n.useEffect)((function(){f(""),m(!1)}),[t]),Object(n.useEffect)((function(){if(c){var e=t.time,r=setInterval((function(){return a(e),e--,d?(a(0),clearInterval(r)):e<0&&!d?(a(0),x.current(),clearInterval(r)):void 0}),1e3);return function(){return clearInterval(r)}}}),[c,t,a,d]),Object(b.jsxs)("article",{className:"question",children:[Object(b.jsx)("h2",{children:t.question}),Object(b.jsx)("ul",{children:t.options.map((function(e,n){return d?Object(b.jsx)("li",{className:"answered\n\t\t\t\t\t\t\t\t".concat(e===O?e.correct?"isRight":"isWrong":O!==t.answer&&e.correct?"isRight":""," \n\t\t\t\t\t\t\t"),children:e.content},e._id):Object(b.jsx)("li",{onClick:function(){return function(e){f(e),m(!0),r({questionId:t._id,option:e._id,time:t.time-i,score:t.score+i})}(e)},children:e.content},e._id)}))}),d&&!s&&Object(b.jsxs)("p",{children:["Cargando siguiente pregunta... ",Object(b.jsx)("span",{className:"loader",children:"\u23f3"})]}),d&&s&&Object(b.jsx)("p",{children:"\xa1Terminaste! \ud83c\udfc1"}),d&&s&&!o&&Object(b.jsxs)("p",{children:["Calculando nota... ",Object(b.jsx)("span",{className:"loader",children:"\u23f3"})]})]})},f=r(7),x=r.n(f),g=r(4),v="http://localhost:3001/api",S=function(){var e=Object(d.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x()({method:"POST",url:v+"/sign/in-user",data:t});case 3:if(200===(r=e.sent).status){e.next=6;break}return e.abrupt("return",{code:400,errors:"\ud83d\ude41 No logramos iniciar sesi\xf3n!",data:r.data});case 6:return g.ReactSession.set("email",t.email),g.ReactSession.set("name",r.data.name),e.abrupt("return",{code:200,data:r.data});case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{code:500,errors:"\ud83d\ude41 Ocurri\xf3 un error y no logramos iniciar sesi\xf3n. "});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(d.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x()({method:"POST",url:v+"/auth",data:t});case 3:if(r=e.sent,console.log("aut",r),201===r.status){e.next=7;break}return e.abrupt("return",{code:400,errors:"\ud83d\ude41 No logramos iniciar sesi\xf3n!",data:r.data});case 7:return console.log(r),g.ReactSession.set("token",r.data.token),e.abrupt("return",{code:200,data:r.data});case 12:return e.prev=12,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{code:500,errors:"\ud83d\ude41 Ocurri\xf3 un error y no logramos iniciar sesi\xf3n. "});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x()({method:"GET",url:v+"/game/checkGame",params:{gameName:t},headers:{Authorization:"Bearer "+g.ReactSession.get("token")}});case 3:if(r=e.sent,console.log("g",r),200===r.status){e.next=7;break}return e.abrupt("return",{code:400,errors:"\ud83d\ude41 No logramos encontrar el juego!"});case 7:return g.ReactSession.set("gameName",r.data.gameName),g.ReactSession.set("gameId",r.data._id),e.abrupt("return",{code:200,data:r.data});case 12:return e.prev=12,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{code:404,errors:"\ud83d\ude41 No logramos encontrar el juego!"});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(d.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x()({method:"GET",url:v+"/game/questions",params:{gameId:t},headers:{Authorization:"Bearer "+g.ReactSession.get("token")}});case 3:if(200===(r=e.sent).status){e.next=6;break}return e.abrupt("return",void 0);case 6:return e.abrupt("return",{code:200,data:r.data});case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{code:404,errors:"\ud83d\ude41 No logramos encontrar el juego!"});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(l.a.mark((function e(t,r,n){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.ReactSession.get("gameId"),e.prev=1,e.next=4,x()({method:"POST",url:v+"/game/answer",data:{answerId:r,gameId:a,time:n,questionId:t},headers:{Authorization:"Bearer "+g.ReactSession.get("token")}});case 4:if(200===(c=e.sent).status){e.next=7;break}return e.abrupt("return",void 0);case 7:return e.abrupt("return",{code:200,data:c.data});case 10:return e.prev=10,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",{code:404,errors:"\ud83d\ude41 Error al guardar la respuesta!"});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,r,n){return e.apply(this,arguments)}}(),R=function(){var e=Object(d.a)(l.a.mark((function e(){var t,r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.ReactSession.get("gameName"),r=g.ReactSession.get("email"),e.prev=2,e.next=5,x()({method:"GET",url:v+"/game/scores",params:{gameName:t,email:r},headers:{Authorization:"Bearer "+g.ReactSession.get("token")}});case 5:if(!((n=e.sent).length>0)){e.next=8;break}return e.abrupt("return",{code:400,errors:"\ud83d\ude41 No logramos encontrar los puntajes a\xfan!"});case 8:return e.abrupt("return",{code:200,message:n,user:r});case 11:return e.prev=11,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",{code:500,errors:"\ud83d\ude41 Ocurri\xf3 un error y no logramos recuperar los puntajes."});case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(d.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.ReactSession.get("email"),e.prev=1,e.next=4,x()({method:"GET",url:v+"/game/grades",params:{email:t},headers:{Authorization:"Bearer "+g.ReactSession.get("token")}});case 4:if(!((r=e.sent).length>0)){e.next=7;break}return e.abrupt("return",{code:400,errors:"\ud83d\ude41 No logramos encontrar los puntajes a\xfan!"});case 7:return e.abrupt("return",{code:200,message:r,user:t});case 10:return e.prev=10,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",{code:500,errors:"\ud83d\ude41 Ocurri\xf3 un error y no logramos recuperar los puntajes."});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),T=function(e,t){return e.find((function(e){return e.email===t}))};var I=function(e){var t=e.setError,r=Object(n.useState)(!1),a=Object(j.a)(r,2),c=a[0],s=a[1],o=Object(n.useState)(null),i=Object(j.a)(o,2),u=i[0],m=i[1],h=Object(n.useState)(""),p=Object(j.a)(h,2),O=p[0],f=p[1];return Object(n.useEffect)((function(){Object(d.a)(l.a.mark((function e(){var r,n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,R();case 4:if(r=e.sent,!(!(n=r.message.data).length>0)){e.next=8;break}return e.abrupt("return",s(!1));case 8:o=n,a=Object.values(o).sort((function(e,t){return t.finalScore-e.finalScore})),c=T(a,r.user),f(c),m(a),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0),t("\ud83d\ude41 Error loading leaderboard.");case 18:s(!1);case 19:case"end":return e.stop()}var o}),e,null,[[1,14]])})))()}),[t]),Object(b.jsxs)("div",{className:"leaderboard",children:[O&&Object(b.jsxs)("div",{className:"leaderboard-group gold",children:[Object(b.jsx)("h3",{children:"Tu puntaje Obtenido"}),Object(b.jsxs)("span",{children:[O.userName," - ",O.finalScore]}),Object(b.jsxs)("h5",{children:["Nota: ",(O.grade/10).toFixed(1)]})]}),Object(b.jsx)("h1",{children:"RANKING \ud83c\udfc6"}),u&&Object(b.jsxs)("div",{className:"leaderboard-group",children:[Object(b.jsx)("h3",{children:"Top 10"}),Object(b.jsx)("ul",{children:u.filter((function(e,t){return t<10})).map((function(e,t){return Object(b.jsxs)("li",{children:[0===t&&"\ud83e\udd47 ",1===t&&"\ud83e\udd48 ",2===t&&"\ud83e\udd49 ",e.email," - ",e.finalScore]},t)}))})]},""),c&&Object(b.jsx)("h3",{children:"Cargando ranking..."}),!u&&!c&&Object(b.jsx)("h3",{children:"\xa1A\xfan sin puntajes!"})]})};var q=function(e){e.category,e.score,e.setError,e.resetGame;var t=Object(n.useState)(""),r=Object(j.a)(t,2);return r[0],r[1],Object(b.jsx)(n.Fragment,{children:Object(b.jsx)("h3",{children:"Revisa tu calificaci\xf3n \ud83d\ude4c"})})};var C=function(e){var t=e.user,r=e.setError,a=(e.resetGame,Object(n.useState)(!1)),c=Object(j.a)(a,2),s=c[0],o=c[1],i=Object(n.useState)(null),u=Object(j.a)(i,2),m=u[0],h=u[1];return Object(n.useEffect)((function(){Object(d.a)(l.a.mark((function e(){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,e.next=4,E(t);case 4:n=e.sent,[],a=n.message.data,h(a),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),r("\ud83d\ude41 Error.");case 14:o(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})))()}),[r]),Object(b.jsxs)("div",{className:"leaderboard",children:[Object(b.jsx)("h3",{children:"Revisa tus calificaciones \ud83d\udda5"}),m&&Object(b.jsx)("div",{className:"leaderboard-group",children:Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Fecha"}),Object(b.jsx)("th",{children:"Test"}),Object(b.jsx)("th",{children:"Nota"}),Object(b.jsx)("th",{children:"Puntaje"})]})}),Object(b.jsx)("tbody",{children:m.map((function(e,t){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:new Date(e.updated_at).toLocaleDateString()}),Object(b.jsx)("td",{children:e.gameName}),Object(b.jsx)("td",{children:e.grade}),Object(b.jsx)("td",{children:e.finalScore})]},t)}))})]})}),s&&Object(b.jsx)("h3",{children:"Cargando calificaciones..."}),!m&&!s&&Object(b.jsx)("h3",{children:"\xa1A\xfan sin puntajes!"})]})};g.ReactSession.setStoreType("localStorage");var P=function(){var e=null;void 0!==g.ReactSession.get("name")&&(e={name:g.ReactSession.get("name"),email:g.ReactSession.get("email")});var t,r,a=Object(n.useState)(e),c=Object(j.a)(a,2),s=c[0],u=c[1],f=Object(n.useState)(!1),x=Object(j.a)(f,2),v=x[0],R=x[1],E=Object(n.useState)(!1),T=Object(j.a)(E,2),P=T[0],A=T[1],G=Object(n.useState)(!1),D=Object(j.a)(G,2),F=D[0],z=D[1],_=Object(n.useState)(!1),B=Object(j.a)(_,2),L=B[0],Q=B[1],M=Object(n.useState)(!1),K=Object(j.a)(M,2),V=K[0],W=(K[1],Object(n.useState)(!0)),J=Object(j.a)(W,2),H=J[0],U=J[1],X=Object(n.useState)(0),Y=Object(j.a)(X,2),Z=Y[0],$=Y[1],ee=Object(n.useState)([]),te=Object(j.a)(ee,2),re=te[0],ne=te[1],ae=Object(n.useState)("General Knowledge"),ce=Object(j.a)(ae,2),se=ce[0],oe=ce[1],ie=Object(n.useState)(null),ue=Object(j.a)(ie,2),le=ue[0],de=ue[1],je=Object(n.useState)(0),be=Object(j.a)(je,2),me=be[0],he=be[1],pe=Object(n.useState)(0),Oe=Object(j.a)(pe,2),fe=Oe[0],xe=Oe[1],ge=Object(n.useState)([]),ve=Object(j.a)(ge,2),Se=ve[0],we=ve[1],Ne=Object(n.useState)(0),ke=Object(j.a)(Ne,2),ye=ke[0],Re=ke[1],Ee=Object(n.useState)(!1),Te=Object(j.a)(Ee,2),Ie=Te[0],qe=Te[1],Ce=Object(n.useState)(!1),Pe=Object(j.a)(Ce,2),Ae=Pe[0],Ge=Pe[1],De=Object(n.useState)(!1),Fe=Object(j.a)(De,2),ze=Fe[0],_e=Fe[1],Be=function(){$(0),ne([]),oe("General Knowledge"),de(null),he(0),xe(0),we([]),Re(0),qe(!1),Ge(!1)},Le=function(){var e=Object(d.a)(l.a.mark((function e(t){var r,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),Q(!0),Be(),r=t.target.email.value,n=t.target.password.value,e.next=7,S({email:r,password:n});case 7:if(200!==(a=e.sent).code){e.next=15;break}return u(a.data),e.next=12,w({email:r,password:n});case 12:console.log("logueado!"),e.next=16;break;case 15:R(a.errors);case 16:Q(!1);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),Be(),g.ReactSession.remove("userName"),g.ReactSession.remove("name"),g.ReactSession.remove("email"),g.ReactSession.remove("gameName"),g.ReactSession.remove("gameId"),g.ReactSession.remove("token"),_e(!1),u(null);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),_e(!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),_e(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ve=function(){var e=Object(d.a)(l.a.mark((function e(t){var r,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),Q(!0),Be(),r=t.target.gameCode.value,e.next=6,N(r);case 6:if(200!==(n=e.sent).code){e.next=16;break}return z(!0),xe(n.data.questions.length),e.next=12,k(n.data._id);case 12:200===(a=e.sent).code?(ne(a.data),qe(!0)):R(a.errors),e.next=17;break;case 16:R(n.errors);case 17:Q(!1);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),We=Object(n.useRef)();return We.current=function(){var e,t=0,r=Object(o.a)(Se);try{for(r.s();!(e=r.n()).done;){var n=e.value;null!==n&&n.isCorrectAnswer&&(t+=n.score)}}catch(a){r.e(a)}finally{r.f()}Re(t),me<fe&&(de(re[me]),he(me+1)),me===fe&&Ge(!0)},Object(n.useEffect)((function(){de(re[0]),he(1)}),[re]),Object(n.useEffect)((function(){if(Se.length){var e=setTimeout((function(){return We.current()}),1500);return function(){return clearTimeout(e)}}}),[Se]),Object(n.useEffect)((function(){var e=setTimeout((function(){return R(!1)}),5e3);return function(){return clearTimeout(e)}}),[v]),Object(b.jsxs)(n.Fragment,{children:[Object(b.jsx)("div",{className:"game-title",children:Object(b.jsx)("a",{onClick:Ke,href:"/",children:Object(b.jsx)("h1",{children:" \ud83d\ude80 TEST DE ACTUALIDAD"})})}),Object(b.jsx)(m,{handleSubmit:Le,setWithTimer:U,loading:L,loadingQuestions:V,quizInProgress:Ie,isShown:P,togglePassword:function(){A((function(e){return!e}))},currentPlayer:s,handleLogout:Qe,handleProfile:Me}),Object(b.jsxs)("div",{className:"container",children:[v&&Object(b.jsx)("div",{className:"error-message",children:v}),L&&Object(b.jsxs)("p",{children:["Cargando... ",Object(b.jsx)("span",{className:"loader",children:"\u23f3"})]}),s&&ze&&(!Ie||Ae)&&Object(b.jsx)(n.Fragment,{children:Object(b.jsx)(C,{user:s,setError:R})}),s&&!ze&&!Ie&&!F&&Object(b.jsxs)("form",{onSubmit:Ve,children:[Object(b.jsx)("div",{children:Object(b.jsx)("p",{children:"Para responder el test debes indicar primero el c\xf3digo espec\xedfico de la sesi\xf3n que te corresponde"})}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"gameCode",children:"C\xf3digo de juego"}),Object(b.jsx)("input",{type:"text",id:"gameCode",defaultValue:"secreto"})]}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("button",{className:"btn",type:"submit",disabled:L||Ie,children:L?"Loading...":Ie?"En juego":"Responder"})})]}),le&&!Ae&&Object(b.jsxs)(n.Fragment,{children:[Object(b.jsxs)("div",{className:"flex-between",children:[Object(b.jsx)(h,{questionNum:me,totalQuestions:fe,percentage:(t=me,r=fe,0===t||0===r?0:Math.floor(100*t/r))}),Object(b.jsx)(p,{question:le,score:ye,withTimer:H,timer:Z})]}),Object(b.jsx)(O,{question:le,handleAnswers:function(e){e&&(console.log("Post answer:",e.questionId,e.option,e.time),y(e.questionId,e.option,e.time),we((function(t){return[].concat(Object(i.a)(t),[e])})),Re(ye+e.score))},lastQuestion:me===fe,gameEnded:Ae,setTimer:$,withTimer:H,timer:Z})]}),Ae&&!ze&&Object(b.jsx)(q,{category:se,score:ye,setError:R,resetGame:Be}),Ae&&!ze&&Object(b.jsx)(I,{setError:R})]})]})};s.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(P,{})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.478a7f6c.chunk.js.map