(this["webpackJsonpfcom-quiz-app"]=this["webpackJsonpfcom-quiz-app"]||[]).push([[0],{26:function(e,t,r){},48:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),c=r(19),s=r.n(c),o=(r(26),r(20)),i=r(21),u=r(2),l=r.n(u),d=r(5),j=r(3),b=r(0);var h=function(e){var t=e.handleSubmit,r=(e.setWithTimer,e.loading),n=(e.loadingQuestions,e.quizInProgress),a=e.isShown,c=e.togglePassword,s=e.currentPlayer,o=e.handleLogout,i=e.handleProfile;return Object(b.jsxs)("header",{children:[s&&Object(b.jsxs)("div",{children:[Object(b.jsxs)("h1",{children:["Hola, ",s.name]}),Object(b.jsxs)("div",{className:"buttons-section",children:[Object(b.jsx)("button",{className:"btn bg-green",type:"button",onClick:i,children:"Mis Puntajes"}),Object(b.jsx)("button",{className:"btn bg-red",type:"button",onClick:o,children:"Salir"})]})]}),!s&&Object(b.jsxs)("form",{onSubmit:t,children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"email",children:"Email"}),Object(b.jsx)("input",{type:"text",id:"email",defaultValue:"email",disabled:r||n})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"password",children:"Contrase\xf1a"}),Object(b.jsx)("input",{id:"password",type:a?"text":"password",defaultValue:"contrase\xf1a",disabled:r||n}),Object(b.jsxs)("div",{className:"checkbox-container",children:[Object(b.jsx)("label",{htmlFor:"checkbox",children:"Mostrar "}),Object(b.jsx)("input",{id:"checkbox",type:"checkbox",checked:a,onChange:c})]})]}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("button",{className:"btn",type:"submit",disabled:r||n,children:r?"Loading...":n?"En juego":"Ingresar"})})]})]})};var m=function(e){var t=e.questionNum,r=e.totalQuestions,a=e.percentage,c=Object(n.useRef)();return Object(n.useEffect)((function(){c.current.style.setProperty("--progress",a)}),[a]),Object(b.jsxs)("div",{className:"progress-conatiner",children:[Object(b.jsxs)("div",{className:"progress-text",children:["Pregunta ",t," de ",r]}),Object(b.jsx)("div",{ref:c,className:"progress-bar"})]})};var O=function(e){var t=e.score,r=e.timer,n=e.withTimer;return Object(b.jsxs)("div",{className:"score-timer-container",children:[n&&Object(b.jsxs)("div",{className:"score-timer-border",children:[Object(b.jsx)("div",{className:"score-timer-text",children:"Timer"}),Object(b.jsx)("div",{className:"score-timer-number",children:r})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"score-timer-text",children:"Score"}),Object(b.jsx)("div",{className:"score-timer-number",children:t})]})]})};var p=function(e){var t=e.question,r=e.handleAnswers,a=e.setTimer,c=e.withTimer,s=e.lastQuestion,o=e.gameEnded,i=Object(n.useState)(!1),u=Object(j.a)(i,2),l=u[0],d=u[1],h=Object(n.useState)(""),m=Object(j.a)(h,2),O=m[0],p=m[1],f=Object(n.useRef)();return f.current=function(){p(t.answer),d(!0),r(null)},Object(n.useEffect)((function(){p(""),d(!1)}),[t]),Object(n.useEffect)((function(){if(c){var e=t.time,r=setInterval((function(){return a(e),e--,l?(a(0),clearInterval(r)):e<0&&!l?(a(0),f.current(),clearInterval(r)):void 0}),1e3);return function(){return clearInterval(r)}}}),[c,t,a,l]),Object(b.jsxs)("article",{className:"question",children:[Object(b.jsx)("h2",{children:t.question}),Object(b.jsx)("ul",{children:t.options.map((function(e,n){return l?Object(b.jsx)("li",{className:"answered\n\t\t\t\t\t\t\t\t".concat(e===O?e.correct?"isRight":"isWrong":O!==t.answer&&e.correct?"isRight":""," \n\t\t\t\t\t\t\t"),children:e.content},e._id):Object(b.jsx)("li",{onClick:function(){return function(e){p(e),d(!0),r({id:t._id,isCorrectAnswer:e.correct})}(e)},children:e.content},e._id)}))}),l&&!s&&Object(b.jsxs)("p",{children:["Cargando siguiente pregunta... ",Object(b.jsx)("span",{className:"loader",children:"\u23f3"})]}),l&&s&&Object(b.jsx)("p",{children:"\xa1Terminaste! \ud83c\udfc1"}),l&&s&&!o&&Object(b.jsxs)("p",{children:["Calculando nota... ",Object(b.jsx)("span",{className:"loader",children:"\u23f3"})]})]})},f=r(7),x=r.n(f),g=r(4),v="http://localhost:3001/api",S=function(){var e=Object(d.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x()({method:"POST",url:v+"/sign/in-user",data:t});case 3:if(200===(r=e.sent).status){e.next=6;break}return e.abrupt("return",{code:400,errors:"\ud83d\ude41 No logramos iniciar sesi\xf3n!",data:r.data});case 6:return g.ReactSession.set("email",t.email),g.ReactSession.set("name",r.data.name),e.abrupt("return",{code:200,data:r.data});case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{code:500,errors:"\ud83d\ude41 Ocurri\xf3 un error y no logramos iniciar sesi\xf3n. "});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x()({method:"POST",url:v+"/auth",data:t});case 3:if(r=e.sent,console.log("aut",r),201===r.status){e.next=7;break}return e.abrupt("return",{code:400,errors:"\ud83d\ude41 No logramos iniciar sesi\xf3n!",data:r.data});case 7:return console.log(r),g.ReactSession.set("token",r.data.token),e.abrupt("return",{code:200,data:r.data});case 12:return e.prev=12,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{code:500,errors:"\ud83d\ude41 Ocurri\xf3 un error y no logramos iniciar sesi\xf3n. "});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(d.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x()({method:"GET",url:v+"/game/checkGame",params:{gameName:t},headers:{Authorization:"Bearer "+g.ReactSession.get("token")}});case 3:if(r=e.sent,console.log("g",r),200===r.status){e.next=7;break}return e.abrupt("return",{code:400,errors:"\ud83d\ude41 No logramos encontrar el juego!"});case 7:return g.ReactSession.set("gameName",r.data.gameName),e.abrupt("return",{code:200,data:r.data});case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{code:404,errors:"\ud83d\ude41 No logramos encontrar el juego!"});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(d.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x()({method:"GET",url:v+"/game/questions",params:{gameId:t},headers:{Authorization:"Bearer "+g.ReactSession.get("token")}});case 3:if(200===(r=e.sent).status){e.next=6;break}return e.abrupt("return",void 0);case 6:return e.abrupt("return",{code:200,data:r.data});case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{code:404,errors:"\ud83d\ude41 No logramos encontrar el juego!"});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(l.a.mark((function e(){var t,r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.ReactSession.get("gameName"),r=g.ReactSession.get("email"),e.prev=2,e.next=5,x()({method:"GET",url:v+"/game/scores",params:{gameName:t,email:r},headers:{Authorization:"Bearer "+g.ReactSession.get("token")}});case 5:if(!((n=e.sent).length>0)){e.next=8;break}return e.abrupt("return",{code:400,errors:"\ud83d\ude41 No logramos encontrar los puntajes a\xfan!"});case 8:return e.abrupt("return",{code:200,message:n,user:r});case 11:return e.prev=11,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",{code:500,errors:"\ud83d\ude41 Ocurri\xf3 un error y no logramos recuperar los puntajes."});case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(d.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.ReactSession.get("email"),e.prev=1,e.next=4,x()({method:"GET",url:v+"/game/grades",params:{email:t},headers:{Authorization:"Bearer "+g.ReactSession.get("token")}});case 4:if(!((r=e.sent).length>0)){e.next=7;break}return e.abrupt("return",{code:400,errors:"\ud83d\ude41 No logramos encontrar los puntajes a\xfan!"});case 7:return e.abrupt("return",{code:200,message:r,user:t});case 10:return e.prev=10,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",{code:500,errors:"\ud83d\ude41 Ocurri\xf3 un error y no logramos recuperar los puntajes."});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),E=function(e,t){return e.find((function(e){return e.email===t}))};var T=function(e){var t=e.setError,r=Object(n.useState)(!1),a=Object(j.a)(r,2),c=a[0],s=a[1],o=Object(n.useState)(null),i=Object(j.a)(o,2),u=i[0],h=i[1],m=Object(n.useState)(""),O=Object(j.a)(m,2),p=O[0],f=O[1];return Object(n.useEffect)((function(){Object(d.a)(l.a.mark((function e(){var r,n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,y();case 4:if(r=e.sent,!(!(n=r.message.data).length>0)){e.next=8;break}return e.abrupt("return",s(!1));case 8:o=n,a=Object.values(o).sort((function(e,t){return t.finalScore-e.finalScore})),c=E(a,r.user),f(c),h(a),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0),t("\ud83d\ude41 Error loading leaderboard.");case 18:s(!1);case 19:case"end":return e.stop()}var o}),e,null,[[1,14]])})))()}),[t]),Object(b.jsxs)("div",{className:"leaderboard",children:[p&&Object(b.jsxs)("div",{className:"leaderboard-group gold",children:[Object(b.jsx)("h3",{children:"Tu puntaje Obtenido"}),Object(b.jsxs)("span",{children:[p.userName," - ",p.finalScore]}),Object(b.jsxs)("h5",{children:["Nota: ",(p.grade/10).toFixed(1)]})]}),Object(b.jsx)("h1",{children:"RANKING \ud83c\udfc6"}),u&&Object(b.jsxs)("div",{className:"leaderboard-group",children:[Object(b.jsx)("h3",{children:"Top 10"}),Object(b.jsx)("ul",{children:u.filter((function(e,t){return t<10})).map((function(e,t){return Object(b.jsxs)("li",{children:[0===t&&"\ud83e\udd47 ",1===t&&"\ud83e\udd48 ",2===t&&"\ud83e\udd49 ",e.email," - ",e.finalScore]},t)}))})]},""),c&&Object(b.jsx)("h3",{children:"Cargando ranking..."}),!u&&!c&&Object(b.jsx)("h3",{children:"\xa1A\xfan sin puntajes!"})]})};var C=function(e){e.category,e.score,e.setError,e.resetGame;var t=Object(n.useState)(""),r=Object(j.a)(t,2);return r[0],r[1],Object(b.jsx)(n.Fragment,{children:Object(b.jsx)("h3",{children:"Revisa tu calificaci\xf3n \ud83d\ude4c"})})};var P=function(e){var t=e.user,r=e.setError,a=(e.resetGame,Object(n.useState)(!1)),c=Object(j.a)(a,2),s=c[0],o=c[1],i=Object(n.useState)(null),u=Object(j.a)(i,2),h=u[0],m=u[1];return Object(n.useEffect)((function(){Object(d.a)(l.a.mark((function e(){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,e.next=4,R(t);case 4:n=e.sent,[],a=n.message.data,m(a),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),r("\ud83d\ude41 Error.");case 14:o(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})))()}),[r]),Object(b.jsxs)("div",{className:"leaderboard",children:[Object(b.jsx)("h3",{children:"Revisa tus calificaciones \ud83d\udda5"}),h&&Object(b.jsx)("div",{className:"leaderboard-group",children:Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Fecha"}),Object(b.jsx)("th",{children:"Test"}),Object(b.jsx)("th",{children:"Nota"}),Object(b.jsx)("th",{children:"Puntaje"})]})}),Object(b.jsx)("tbody",{children:h.map((function(e,t){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:new Date(e.updated_at).toLocaleDateString()}),Object(b.jsx)("td",{children:e.gameName}),Object(b.jsx)("td",{children:e.grade}),Object(b.jsx)("td",{children:e.finalScore})]},t)}))})]})}),s&&Object(b.jsx)("h3",{children:"Cargando calificaciones..."}),!h&&!s&&Object(b.jsx)("h3",{children:"\xa1A\xfan sin puntajes!"})]})};g.ReactSession.setStoreType("localStorage");var q=function(){var e=null;void 0!==g.ReactSession.get("name")&&(e={name:g.ReactSession.get("name"),email:g.ReactSession.get("email")});var t,r,a=Object(n.useState)(e),c=Object(j.a)(a,2),s=c[0],u=c[1],f=Object(n.useState)(!1),x=Object(j.a)(f,2),v=x[0],y=x[1],R=Object(n.useState)(!1),E=Object(j.a)(R,2),q=E[0],A=E[1],G=Object(n.useState)(!1),I=Object(j.a)(G,2),D=I[0],F=I[1],z=Object(n.useState)(!1),L=Object(j.a)(z,2),Q=L[0],B=L[1],_=Object(n.useState)(!1),M=Object(j.a)(_,2),K=M[0],V=(M[1],Object(n.useState)(!0)),W=Object(j.a)(V,2),J=W[0],H=W[1],U=Object(n.useState)(0),X=Object(j.a)(U,2),Y=X[0],Z=X[1],$=Object(n.useState)([]),ee=Object(j.a)($,2),te=ee[0],re=ee[1],ne=Object(n.useState)("General Knowledge"),ae=Object(j.a)(ne,2),ce=ae[0],se=ae[1],oe=Object(n.useState)(null),ie=Object(j.a)(oe,2),ue=ie[0],le=ie[1],de=Object(n.useState)(0),je=Object(j.a)(de,2),be=je[0],he=je[1],me=Object(n.useState)(0),Oe=Object(j.a)(me,2),pe=Oe[0],fe=Oe[1],xe=Object(n.useState)([]),ge=Object(j.a)(xe,2),ve=ge[0],Se=ge[1],Ne=Object(n.useState)(0),we=Object(j.a)(Ne,2),ke=we[0],ye=we[1],Re=Object(n.useState)(!1),Ee=Object(j.a)(Re,2),Te=Ee[0],Ce=Ee[1],Pe=Object(n.useState)(!1),qe=Object(j.a)(Pe,2),Ae=qe[0],Ge=qe[1],Ie=Object(n.useState)(!1),De=Object(j.a)(Ie,2),Fe=De[0],ze=De[1],Le=function(){Z(0),re([]),se("General Knowledge"),le(null),he(0),fe(0),Se([]),ye(0),Ce(!1),Ge(!1)},Qe=function(){var e=Object(d.a)(l.a.mark((function e(t){var r,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),B(!0),Le(),r=t.target.email.value,n=t.target.password.value,e.next=7,S({email:r,password:n});case 7:if(200!==(a=e.sent).code){e.next=15;break}return u(a.data),e.next=12,N({email:r,password:n});case 12:console.log("logueado!"),e.next=16;break;case 15:y(a.errors);case 16:B(!1);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),Le(),g.ReactSession.remove("userName"),g.ReactSession.remove("name"),g.ReactSession.remove("email"),g.ReactSession.remove("gameName"),g.ReactSession.remove("token"),ze(!1),u(null);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),ze(!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),ze(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(d.a)(l.a.mark((function e(t){var r,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),B(!0),Le(),r=t.target.gameCode.value,e.next=6,w(r);case 6:if(200!==(n=e.sent).code){e.next=16;break}return F(!0),fe(n.data.questions.length),e.next=12,k(n.data._id);case 12:200===(a=e.sent).code?(re(a.data),Ce(!0)):y(a.errors),e.next=17;break;case 16:y(n.errors);case 17:B(!1);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ve=Object(n.useRef)();return Ve.current=function(){var e,t=0,r=Object(o.a)(ve);try{for(r.s();!(e=r.n()).done;){var n=e.value;null!==n&&n.isCorrectAnswer&&(t+=100)}}catch(a){r.e(a)}finally{r.f()}ye(t),be<pe&&(le(te[be]),he(be+1)),be===pe&&Ge(!0)},Object(n.useEffect)((function(){le(te[0]),he(1)}),[te]),Object(n.useEffect)((function(){if(ve.length){var e=setTimeout((function(){return Ve.current()}),1500);return function(){return clearTimeout(e)}}}),[ve]),Object(n.useEffect)((function(){var e=setTimeout((function(){return y(!1)}),5e3);return function(){return clearTimeout(e)}}),[v]),Object(b.jsxs)(n.Fragment,{children:[Object(b.jsx)("div",{className:"game-title",children:Object(b.jsx)("a",{onClick:Me,href:"/",children:Object(b.jsx)("h1",{children:" \ud83d\ude80 TEST DE ACTUALIDAD"})})}),Object(b.jsx)(h,{handleSubmit:Qe,setWithTimer:H,loading:Q,loadingQuestions:K,quizInProgress:Te,isShown:q,togglePassword:function(){A((function(e){return!e}))},currentPlayer:s,handleLogout:Be,handleProfile:_e}),Object(b.jsxs)("div",{className:"container",children:[v&&Object(b.jsx)("div",{className:"error-message",children:v}),Q&&Object(b.jsxs)("p",{children:["Cargando... ",Object(b.jsx)("span",{className:"loader",children:"\u23f3"})]}),s&&Fe&&(!Te||Ae)&&Object(b.jsx)(n.Fragment,{children:Object(b.jsx)(P,{user:s,setError:y})}),s&&!Fe&&!Te&&!D&&Object(b.jsxs)("form",{onSubmit:Ke,children:[Object(b.jsx)("div",{children:Object(b.jsx)("p",{children:"Para responder el test debes indicar primero el c\xf3digo espec\xedfico de la sesi\xf3n que te corresponde"})}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"gameCode",children:"C\xf3digo de juego"}),Object(b.jsx)("input",{type:"text",id:"gameCode",defaultValue:"secreto"})]}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("button",{className:"btn",type:"submit",disabled:Q||Te,children:Q?"Loading...":Te?"En juego":"Responder"})})]}),ue&&!Ae&&Object(b.jsxs)(n.Fragment,{children:[Object(b.jsxs)("div",{className:"flex-between",children:[Object(b.jsx)(m,{questionNum:be,totalQuestions:pe,percentage:(t=be,r=pe,0===t||0===r?0:Math.floor(100*t/r))}),Object(b.jsx)(O,{question:ue,score:ke,withTimer:J,timer:Y})]}),Object(b.jsx)(p,{question:ue,handleAnswers:function(e){Se((function(t){return[].concat(Object(i.a)(t),[e])})),ye("?")},lastQuestion:be===pe,gameEnded:Ae,setTimer:Z,withTimer:J})]}),Ae&&!Fe&&Object(b.jsx)(C,{category:ce,score:ke,setError:y,resetGame:Le}),Ae&&!Fe&&Object(b.jsx)(T,{setError:y})]})]})};s.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(q,{})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.07f46758.chunk.js.map