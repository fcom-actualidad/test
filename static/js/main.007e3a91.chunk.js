(this["webpackJsonpfcom-quiz-app"]=this["webpackJsonpfcom-quiz-app"]||[]).push([[0],{26:function(e,t,r){},48:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),c=r(19),s=r.n(c),o=(r(26),r(20)),i=r(21),u=r(2),l=r.n(u),j=r(5),d=r(3),b=r(0);var m=function(e){var t=e.handleSubmit,r=(e.setWithTimer,e.loading),n=(e.loadingQuestions,e.quizInProgress),a=e.isShown,c=e.togglePassword,s=e.currentPlayer,o=e.handleLogout,i=e.handleProfile;return Object(b.jsxs)("header",{children:[s&&Object(b.jsxs)("div",{children:[Object(b.jsxs)("h1",{children:["Hola, ",s.name]}),Object(b.jsxs)("div",{className:"buttons-section",children:[Object(b.jsx)("button",{className:"btn bg-green",type:"button",onClick:i,children:"Mis Puntajes"}),Object(b.jsx)("button",{className:"btn bg-red",type:"button",onClick:o,children:"Salir"})]})]}),!s&&Object(b.jsxs)("form",{onSubmit:t,children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"email",children:"Email"}),Object(b.jsx)("input",{type:"text",id:"email",defaultValue:"email",disabled:r||n})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"password",children:"Contrase\xf1a"}),Object(b.jsx)("input",{id:"password",type:a?"text":"password",defaultValue:"contrase\xf1a",disabled:r||n}),Object(b.jsxs)("div",{className:"checkbox-container",children:[Object(b.jsx)("label",{htmlFor:"checkbox",children:"Mostrar "}),Object(b.jsx)("input",{id:"checkbox",type:"checkbox",checked:a,onChange:c})]})]}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("button",{className:"btn",type:"submit",disabled:r||n,children:r?"Loading...":n?"En juego":"Ingresar"})})]})]})};var p=function(e){var t=e.questionNum,r=e.totalQuestions,a=e.percentage,c=Object(n.useRef)();return Object(n.useEffect)((function(){c.current.style.setProperty("--progress",a)}),[a]),Object(b.jsxs)("div",{className:"progress-conatiner",children:[Object(b.jsxs)("div",{className:"progress-text",children:["Question ",t," of ",r]}),Object(b.jsx)("div",{ref:c,className:"progress-bar"})]})};var h=function(e){var t=e.score,r=e.timer,n=e.withTimer;return Object(b.jsxs)("div",{className:"score-timer-container",children:[n&&Object(b.jsxs)("div",{className:"score-timer-border",children:[Object(b.jsx)("div",{className:"score-timer-text",children:"Timer"}),Object(b.jsx)("div",{className:"score-timer-number",children:r})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"score-timer-text",children:"Score"}),Object(b.jsx)("div",{className:"score-timer-number",children:t})]})]})};var O=function(e){var t=e.question,r=e.handleAnswers,a=e.setTimer,c=e.withTimer,s=e.lastQuestion,o=e.gameEnded,i=Object(n.useState)(!1),u=Object(d.a)(i,2),l=u[0],j=u[1],m=Object(n.useState)(""),p=Object(d.a)(m,2),h=p[0],O=p[1],f=Object(n.useRef)();return f.current=function(){O(t.answer),j(!0),r(null)},Object(n.useEffect)((function(){O(""),j(!1)}),[t]),Object(n.useEffect)((function(){if(c){var e=t.time,r=setInterval((function(){return a(e),e--,l?(a(0),clearInterval(r)):e<0&&!l?(a(0),f.current(),clearInterval(r)):void 0}),1e3);return function(){return clearInterval(r)}}}),[c,t,a,l]),Object(b.jsxs)("article",{className:"question",children:[Object(b.jsx)("h2",{children:t.question}),Object(b.jsx)("ul",{children:t.options.map((function(e,n){return l?Object(b.jsx)("li",{className:"answered\n\t\t\t\t\t\t\t\t".concat(e===h?h===t.answer?"isRight":"isWrong":h!==t.answer&&e===t.answer?"isRight":""," \n\t\t\t\t\t\t\t"),children:e},e):Object(b.jsx)("li",{onClick:function(){return function(e){O(e),j(!0),r({id:t.id,isCorrectAnswer:t.answer===e})}(e)},children:e},e)}))}),l&&!s&&Object(b.jsxs)("p",{children:["Cargando siguiente pregunta... ",Object(b.jsx)("span",{className:"loader",children:"\u23f3"})]}),l&&s&&Object(b.jsx)("p",{children:"\xa1Terminaste! \ud83c\udfc1"}),l&&s&&!o&&Object(b.jsxs)("p",{children:["Calculando nota... ",Object(b.jsx)("span",{className:"loader",children:"\u23f3"})]})]})},f=r(7),x=r.n(f),g=r(4),v="https://fcom-actualidad.herokuapp.com/api",S=function(){var e=Object(j.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x()({method:"POST",url:v+"/sign/in-user",data:t});case 3:if(200===(r=e.sent).status){e.next=6;break}return e.abrupt("return",{code:400,errors:"\ud83d\ude41 No logramos iniciar sesi\xf3n!",data:r.data});case 6:return g.ReactSession.set("email",t.email),g.ReactSession.set("name",r.data.name),e.abrupt("return",{code:200,data:r.data});case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{code:500,errors:"\ud83d\ude41 Ocurri\xf3 un error y no logramos iniciar sesi\xf3n. "});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(j.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x()({method:"POST",url:v+"/auth",data:t});case 3:if(r=e.sent,console.log("aut",r),201===r.status){e.next=7;break}return e.abrupt("return",{code:400,errors:"\ud83d\ude41 No logramos iniciar sesi\xf3n!",data:r.data});case 7:return console.log(r),g.ReactSession.set("token",r.data.token),e.abrupt("return",{code:200,data:r.data});case 12:return e.prev=12,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{code:500,errors:"\ud83d\ude41 Ocurri\xf3 un error y no logramos iniciar sesi\xf3n. "});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(j.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x()({method:"GET",url:v+"/game/checkGame",params:{gameName:t},headers:{Authorization:"Bearer "+g.ReactSession.get("token")}});case 3:if(r=e.sent,console.log("g",r),200===r.status){e.next=7;break}return e.abrupt("return",{code:400,errors:"\ud83d\ude41 No logramos encontrar el juego!"});case 7:return g.ReactSession.set("gameName",r.data.gameName),e.abrupt("return",{code:200,data:r.data});case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{code:500,errors:"\ud83d\ude41 Ocurri\xf3 un error y no logramos iniciar sesi\xf3n."});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(j.a)(l.a.mark((function e(){var t,r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.ReactSession.get("gameName"),r=g.ReactSession.get("email"),e.prev=2,e.next=5,x()({method:"GET",url:v+"/game/scores",params:{gameName:t,email:r},headers:{Authorization:"Bearer "+g.ReactSession.get("token")}});case 5:if(!((n=e.sent).length>0)){e.next=8;break}return e.abrupt("return",{code:400,errors:"\ud83d\ude41 No logramos encontrar los puntajes a\xfan!"});case 8:return e.abrupt("return",{code:200,message:n,user:r});case 11:return e.prev=11,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",{code:500,errors:"\ud83d\ude41 Ocurri\xf3 un error y no logramos recuperar los puntajes."});case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(j.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.ReactSession.get("email"),e.prev=1,e.next=4,x()({method:"GET",url:v+"/game/grades",params:{email:t},headers:{Authorization:"Bearer "+g.ReactSession.get("token")}});case 4:if(!((r=e.sent).length>0)){e.next=7;break}return e.abrupt("return",{code:400,errors:"\ud83d\ude41 No logramos encontrar los puntajes a\xfan!"});case 7:return e.abrupt("return",{code:200,message:r,user:t});case 10:return e.prev=10,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",{code:500,errors:"\ud83d\ude41 Ocurri\xf3 un error y no logramos recuperar los puntajes."});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),E=function(e,t){return e.find((function(e){return e.email===t}))};var R=function(e){var t=e.setError,r=Object(n.useState)(!1),a=Object(d.a)(r,2),c=a[0],s=a[1],o=Object(n.useState)(null),i=Object(d.a)(o,2),u=i[0],m=i[1],p=Object(n.useState)(""),h=Object(d.a)(p,2),O=h[0],f=h[1];return Object(n.useEffect)((function(){Object(j.a)(l.a.mark((function e(){var r,n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,k();case 4:if(r=e.sent,!(!(n=r.message.data).length>0)){e.next=8;break}return e.abrupt("return",s(!1));case 8:console.log(n),o=n,a=Object.values(o).sort((function(e,t){return t.finalScore-e.finalScore})),console.log(a),c=E(a,r.user),f(c),m(a),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0),t("\ud83d\ude41 Error loading leaderboard.");case 20:s(!1);case 21:case"end":return e.stop()}var o}),e,null,[[1,16]])})))()}),[t]),Object(b.jsxs)("div",{className:"leaderboard",children:[O&&Object(b.jsxs)("div",{className:"leaderboard-group gold",children:[Object(b.jsx)("h3",{children:"Tu puntaje Obtenido"}),Object(b.jsxs)("span",{children:[O.userName," - ",O.finalScore]}),Object(b.jsxs)("h5",{children:["Nota: ",(O.grade/10).toFixed(1)]})]}),Object(b.jsx)("h1",{children:"RANKING \ud83c\udfc6"}),u&&Object(b.jsxs)("div",{className:"leaderboard-group",children:[Object(b.jsx)("h3",{children:"Top 10"}),Object(b.jsx)("ul",{children:u.filter((function(e,t){return t<10})).map((function(e,t){return Object(b.jsxs)("li",{children:[0===t&&"\ud83e\udd47 ",1===t&&"\ud83e\udd48 ",2===t&&"\ud83e\udd49 ",e.email," - ",e.finalScore]},e)}))})]},""),c&&Object(b.jsx)("h3",{children:"Cargando ranking..."}),!u&&!c&&Object(b.jsx)("h3",{children:"\xa1A\xfan sin puntajes!"})]})};var T=function(e){e.category,e.score,e.setError,e.resetGame;var t=Object(n.useState)(""),r=Object(d.a)(t,2);return r[0],r[1],Object(b.jsx)(n.Fragment,{children:Object(b.jsx)("h3",{children:"Revisa tu calificaci\xf3n \ud83d\ude4c"})})};var C=function(e){var t=e.user,r=e.setError,a=e.resetGame,c=Object(n.useState)(!1),s=Object(d.a)(c,2),o=s[0],i=s[1],u=Object(n.useState)(null),m=Object(d.a)(u,2),p=m[0],h=m[1];return Object(n.useEffect)((function(){Object(j.a)(l.a.mark((function e(){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.prev=1,e.next=4,y(t);case 4:n=e.sent,[],c=n.message.data,h(c),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),r("\ud83d\ude41 Error.");case 14:a(),i(!1);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})))()}),[r]),Object(b.jsxs)("div",{className:"leaderboard",children:[Object(b.jsx)("h3",{children:"Revisa tus calificaciones \ud83d\udda5"}),p&&Object(b.jsx)("div",{className:"leaderboard-group",children:Object(b.jsxs)("table",{children:[Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Fecha"}),Object(b.jsx)("th",{children:"Test"}),Object(b.jsx)("th",{children:"Nota"}),Object(b.jsx)("th",{children:"Puntaje"})]}),p.map((function(e,t){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:new Date(e.updated_at).toLocaleDateString()}),Object(b.jsx)("td",{children:e.gameName}),Object(b.jsx)("td",{children:e.grade}),Object(b.jsx)("td",{children:e.finalScore})]})}))]})},""),o&&Object(b.jsx)("h3",{children:"Cargando calificaciones..."}),!p&&!o&&Object(b.jsx)("h3",{children:"\xa1A\xfan sin puntajes!"})]})};g.ReactSession.setStoreType("localStorage");var q=function(){var e=null;void 0!==g.ReactSession.get("name")&&(e={name:g.ReactSession.get("name"),email:g.ReactSession.get("email")});var t,r,a=Object(n.useState)(e),c=Object(d.a)(a,2),s=c[0],u=c[1],f=Object(n.useState)(!1),x=Object(d.a)(f,2),v=x[0],k=x[1],y=Object(n.useState)(!1),E=Object(d.a)(y,2),q=E[0],P=E[1],A=Object(n.useState)(!1),D=Object(d.a)(A,2),G=D[0],F=D[1],I=Object(n.useState)(!1),z=Object(d.a)(I,2),M=z[0],Q=z[1],L=Object(n.useState)(!1),B=Object(d.a)(L,2),K=B[0],V=(B[1],Object(n.useState)(!0)),W=Object(d.a)(V,2),J=W[0],H=W[1],U=Object(n.useState)(0),_=Object(d.a)(U,2),X=_[0],Y=_[1],Z=Object(n.useState)([]),$=Object(d.a)(Z,2),ee=$[0],te=$[1],re=Object(n.useState)("General Knowledge"),ne=Object(d.a)(re,2),ae=ne[0],ce=ne[1],se=Object(n.useState)(null),oe=Object(d.a)(se,2),ie=oe[0],ue=oe[1],le=Object(n.useState)(0),je=Object(d.a)(le,2),de=je[0],be=je[1],me=Object(n.useState)(0),pe=Object(d.a)(me,2),he=pe[0],Oe=pe[1],fe=Object(n.useState)([]),xe=Object(d.a)(fe,2),ge=xe[0],ve=xe[1],Se=Object(n.useState)(0),we=Object(d.a)(Se,2),Ne=we[0],ke=we[1],ye=Object(n.useState)(!1),Ee=Object(d.a)(ye,2),Re=Ee[0],Te=Ee[1],Ce=Object(n.useState)(!1),qe=Object(d.a)(Ce,2),Pe=qe[0],Ae=qe[1],De=Object(n.useState)(!1),Ge=Object(d.a)(De,2),Fe=Ge[0],Ie=Ge[1],ze=function(){Y(0),te([]),ce("General Knowledge"),ue(null),be(0),Oe(0),ve([]),ke(0),Te(!1),Ae(!1)},Me=function(){var e=Object(j.a)(l.a.mark((function e(t){var r,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),Q(!0),ze(),r=t.target.email.value,n=t.target.password.value,e.next=7,S({email:r,password:n});case 7:if(200!==(a=e.sent).code){e.next=14;break}return u(a.data),e.next=12,w({email:r,password:n});case 12:e.next=15;break;case 14:k(a.errors);case 15:Q(!1);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),ze(),g.ReactSession.remove("userName"),g.ReactSession.remove("name"),g.ReactSession.remove("email"),g.ReactSession.remove("gameName"),g.ReactSession.remove("token"),Ie(!1),u(null);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Le=function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),Ie(!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),Ie(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(j.a)(l.a.mark((function e(t){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),Q(!0),ze(),r=t.target.gameCode.value,e.next=6,N(r);case 6:200===(n=e.sent).code?(F(!0),Oe(n.data.questions.length)):k(n.errors),Q(!1),te([{id:"00-".concat(Date.now()),question:"Esta es la pregunta 01",answer:"opci\xf3n01",options:["opci\xf3n01","opci\xf3n02","opci\xf3n03"].sort((function(){return Math.random()-.5})),time:30},{id:"01-".concat(Date.now()),question:"Esta es la pregunta 02",answer:"opci\xf3n03",options:["opci\xf3n01","opci\xf3n02","opci\xf3n03"].sort((function(){return Math.random()-.5})),time:20},{id:"02-".concat(Date.now()),question:"Esta es la pregunta 03",answer:"opci\xf3n02",options:["opci\xf3n01","opci\xf3n02","opci\xf3n03"].sort((function(){return Math.random()-.5})),time:25}]),Te(!0);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ve=Object(n.useRef)();return Ve.current=function(){var e,t=0,r=Object(o.a)(ge);try{for(r.s();!(e=r.n()).done;){var n=e.value;null!==n&&n.isCorrectAnswer&&(t+=100)}}catch(a){r.e(a)}finally{r.f()}ke(t),de<he&&(ue(ee[de]),be(de+1)),de===he&&Ae(!0)},Object(n.useEffect)((function(){ue(ee[0]),be(1)}),[ee]),Object(n.useEffect)((function(){if(ge.length){var e=setTimeout((function(){return Ve.current()}),1500);return function(){return clearTimeout(e)}}}),[ge]),Object(n.useEffect)((function(){var e=setTimeout((function(){return k(!1)}),5e3);return function(){return clearTimeout(e)}}),[v]),Object(b.jsxs)(n.Fragment,{children:[Object(b.jsx)("div",{className:"game-title",children:Object(b.jsx)("a",{onClick:Be,href:"/",children:Object(b.jsx)("h1",{children:" \ud83d\ude80 TEST DE ACTUALIDAD"})})}),Object(b.jsx)(m,{handleSubmit:Me,setWithTimer:H,loading:M,loadingQuestions:K,quizInProgress:Re,isShown:q,togglePassword:function(){P((function(e){return!e}))},currentPlayer:s,handleLogout:Qe,handleProfile:Le}),Object(b.jsxs)("div",{className:"container",children:[v&&Object(b.jsx)("div",{className:"error-message",children:v}),M&&Object(b.jsxs)("p",{children:["Cargando... ",Object(b.jsx)("span",{className:"loader",children:"\u23f3"})]}),s&&Fe&&!Re&&!G&&Object(b.jsx)(n.Fragment,{children:Object(b.jsx)(C,{user:s,setError:k,resetGame:ze})}),s&&!Fe&&!Re&&!G&&Object(b.jsxs)("form",{onSubmit:Ke,children:[Object(b.jsx)("div",{children:Object(b.jsx)("p",{children:"Para responder el test debes indicar primero el c\xf3digo espec\xedfico de la sesi\xf3n que te corresponde"})}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"gameCode",children:"C\xf3digo de juego"}),Object(b.jsx)("input",{type:"text",id:"gameCode",defaultValue:"secreto"})]}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("button",{className:"btn",type:"submit",disabled:M||Re,children:M?"Loading...":Re?"En juego":"Responder"})})]}),ie&&!Pe&&Object(b.jsxs)(n.Fragment,{children:[Object(b.jsxs)("div",{className:"flex-between",children:[Object(b.jsx)(p,{questionNum:de,totalQuestions:he,percentage:(t=de,r=he,0===t||0===r?0:Math.floor(100*t/r))}),Object(b.jsx)(h,{question:ie,score:Ne,withTimer:J,timer:X})]}),Object(b.jsx)(O,{question:ie,handleAnswers:function(e){ve((function(t){return[].concat(Object(i.a)(t),[e])})),ke("?")},lastQuestion:de===he,gameEnded:Pe,setTimer:Y,withTimer:J})]}),Pe&&!Fe&&Object(b.jsx)(T,{category:ae,score:Ne,setError:k,resetGame:ze}),Pe&&!Fe&&Object(b.jsx)(R,{setError:k})]})]})};s.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(q,{})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.007e3a91.chunk.js.map